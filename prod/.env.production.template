# Phase 15.1 Document Management System - Production Environment Variables
# Copy this file to .env in your backend directory and configure the values

# ============================================
# STORAGE CONFIGURATION
# ============================================

# Storage provider: local, s3, or cloudinary
STORAGE_PROVIDER=local

# Local storage path (if using local storage)
LOCAL_STORAGE_PATH=./uploads

# Base URL for serving files (adjust for your domain)
BASE_URL=https://your-domain.com

# ============================================
# AWS S3 CONFIGURATION (if using S3)
# ============================================

# AWS Region
AWS_REGION=us-east-1

# AWS Credentials
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here

# S3 Bucket Name
AWS_S3_BUCKET=your-bucket-name

# ============================================
# FILE UPLOAD LIMITS
# ============================================

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Maximum number of files per upload
MAX_FILES_PER_UPLOAD=10

# ============================================
# PHASE 16.5: DOCUMENT TO PDF CONVERSION
# ============================================

# Enable background conversion worker loop inside backend
CONVERSION_WORKER_ENABLED=true

# Max number of concurrent conversions per backend instance
CONVERSION_WORKER_CONCURRENCY=2

# If a job is stuck in PROCESSING longer than this, it will be re-queued
CONVERSION_WORKER_STUCK_MINUTES=30

# Optional external conversion provider (recommended for Office/HTML)
# Requires S3 storage so backend can generate a signed download URL
CLOUDCONVERT_API_KEY=

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@localhost:5432/mining_erp

# ============================================
# JWT CONFIGURATION
# ============================================

# JWT Secret (use a strong random string)
JWT_SECRET=your_jwt_secret_here

# JWT Expiration (e.g., 1d, 7d, 30d)
JWT_EXPIRES_IN=7d

# ============================================
# APPLICATION CONFIGURATION
# ============================================

# Node environment
NODE_ENV=production

# Port for backend server
PORT=3000

# ============================================
# CORS CONFIGURATION
# ============================================

# Allowed origins (comma-separated)
CORS_ORIGIN=https://your-frontend-domain.com

# ============================================
# LOGGING
# ============================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# ============================================
# SECURITY
# ============================================

# Enable virus scanning (future feature)
ENABLE_VIRUS_SCAN=false

# Rate limiting (requests per minute)
RATE_LIMIT_MAX=100

# ============================================
# MONITORING
# ============================================

# Enable performance monitoring
ENABLE_MONITORING=true

# Sentry DSN (optional)
SENTRY_DSN=

# ============================================
# NOTES
# ============================================

# 1. For local storage, ensure the LOCAL_STORAGE_PATH directory exists and has proper permissions
# 2. For S3 storage, ensure the IAM user has s3:PutObject, s3:GetObject, and s3:DeleteObject permissions
# 3. Keep JWT_SECRET secure and never commit it to version control
# 4. Adjust MAX_FILE_SIZE based on your requirements and server capacity
# 5. Configure CORS_ORIGIN to match your frontend domain
# 6. Use strong, unique passwords for DATABASE_URL
# 7. Enable HTTPS in production for secure file transfers
